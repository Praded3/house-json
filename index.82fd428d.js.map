{"mappings":"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","sources":["src/small-form.js"],"sourcesContent":["const refs = {\n    backdrop: document.querySelector('.steps__form-backdrop'),\n    \n    modalInput: document.querySelectorAll('.steps__input'),\n    modalFormBtn: document.querySelector('.steps__btn'),\n    modalCloseBtn: document.querySelector('.steps__form-close-btn'),\n    body: document.querySelector('body'),\n    clientName: document.querySelector('.modal__thanks-name'),\n    \n}\n  const TOKEN = '6279094717:AAEINNI-WB8PTYW-nQglKgNdX6lALH6T6A0';\n        const CHAT_ID = '-1001887598395';\n        const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const modalFormS = document.querySelector('.steps__form');\n\n\n    modalFormS.addEventListener('submit', formSend);\n\n    async function formSend(e) {\n        e.preventDefault();\n\n        let error = formValidate(modalFormS);\n        let formData = new FormData(modalFormS);\n\n        if (formData) {\n        }\n\n\n        formData.forEach((x, y) => {\n            console.log(x);\n            console.log(y);\n        \n        });\n\n\n        if (error === 0) {\n            onModalFormBtnClick();\n            let messageToTg = `<b>New small action</b>\\n`;\n            function sendMessage() {\n       \n            \n            \n        \n                for (let entry of formData.entries()) {\n                    console.log(entry);\n\n                    if (entry[1] != '') {\n                        messageToTg += ` ${entry.join(\" : \")}\\n`;\n                        console.log(messageToTg);\n                    }\n\n            \n                }\n                return messageToTg;\n            };\n\n            sendMessage();\n            axios.post(URI_API, {\n                chat_id: CHAT_ID,\n                parse_mode: 'html',\n                text: messageToTg,\n            });\n        }\n\n    };\n\n\n    function formValidate(modalFormS) {\n        let error = 0;\n        let formReq = document.querySelectorAll('._req');\n         console.log(formReq);\n        \n\n        for (let index = 0; index < formReq.length; index++) {\n            const input = formReq[index];\n            formRemoveError(input);\n\n            if (input.classList.contains('_email')) {\n                if (emailTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            } else {\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tformAddError(input);\n\t\t\t\t\terror++;\n\t\t\t\t}\n\t\t\t}\n        }\n        return error;\n    }\n\n    function formAddError(input) {\n        input.classList.add('_error');\n        input.classList.add('_error');\n    }\n    function formRemoveError(input) {\n        input.classList.remove('_error');\n        input.classList.remove('_error');\n    }\n\n\n    function emailTest(input) {\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n});\n \n\n\n\n\n\n\n\nfunction onModalFormBtnClick(event) {\n    console.log('qqqq');\n    refs.backdrop.classList.toggle('is-hiden');\n\n    refs.backdrop.addEventListener('click', onBackdropClick);\n    refs.modalCloseBtn.addEventListener('click', (onModalCloseBtnClick));\n\n    refs.clientName.textContent = `Dear ${refs.modalInput[0].value},`;\n    window.addEventListener('keydown', onEscKeyPress);\n    // refs.modalFormBtn.removeEventListener('click', (onModalFormBtnClick));\n}\n\nfunction onModalCloseBtnClick(event) {\n    window.removeEventListener('keydown', onEscKeyPress);\n    refs.backdrop.removeEventListener('click', onBackdropClick);\n\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.backdrop.classList.toggle('is-hiden');\n\n}\nfunction onBackdropClick(event) {\n\n    if (event.target === event.currentTarget) {\n\n        onModalCloseBtnClick();\n    }\n};\n\nfunction onEscKeyPress(event) {   \n    \n    if (event.code===\"Escape\") {\n        onModalCloseBtnClick();\n    }\n    \n}"],"names":["$bpxeT","parcelRequire","$be6db74326a0a31e$var$refs","backdrop","document","querySelector","modalInput","querySelectorAll","modalFormBtn","modalCloseBtn","body","clientName","$be6db74326a0a31e$var$CHAT_ID","$be6db74326a0a31e$var$URI_API","concat","$be6db74326a0a31e$var$onModalFormBtnClick","event","console","log","classList","toggle","addEventListener","$be6db74326a0a31e$var$onBackdropClick","$be6db74326a0a31e$var$onModalCloseBtnClick","textContent","value","window","$be6db74326a0a31e$var$onEscKeyPress","removeEventListener","target","currentTarget","code","modalFormS","_formSend","$parcel$interopDefault","$2TvXO","mark","_callee","e","error","formData","messageToTg","sendMessage","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","entry","join","err","return","preventDefault","formValidate","FormData","forEach","x","y","axios","post","chat_id","parse_mode","text","apply","this","arguments","formReq","index","length","input","formRemoveError","contains","emailTest","formAddError","add","remove","test"],"version":3,"file":"index.82fd428d.js.map"}