{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aAAMC,EAAO,CACTC,SAAUC,SAASC,cAAc,yBAEjCC,WAAYF,SAASG,iBAAiB,iBACtCC,aAAcJ,SAASC,cAAc,eACrCI,cAAeL,SAASC,cAAc,0BACtCK,KAAMN,SAASC,cAAc,QAC7BM,WAAYP,SAASC,cAAc,wBA2GvC,SAASO,EAAoBC,GACzBC,QAAQC,IAAI,QACZb,EAAKC,SAASa,UAAUC,OAAO,YAE/Bf,EAAKC,SAASe,iBAAiB,QAASC,GACxCjB,EAAKO,cAAcS,iBAAiB,QAAUE,GAE9ClB,EAAKS,WAAWU,YAAc,QAAiCC,OAAzBpB,EAAKI,WAAW,GAAGiB,MAAM,KAC/DC,OAAON,iBAAiB,UAAWO,E,CAIvC,SAASL,EAAqBP,GAC1BW,OAAOE,oBAAoB,UAAWD,GACtCvB,EAAKC,SAASuB,oBAAoB,QAASP,GAE3CjB,EAAKO,cAAciB,oBAAoB,QAAUN,GACjDlB,EAAKO,cAAciB,oBAAoB,QAAUN,GACjDlB,EAAKC,SAASa,UAAUC,OAAO,W,CAGnC,SAASE,EAAgBN,GAEjBA,EAAMc,SAAWd,EAAMe,eAEvBR,G,CAIR,SAASK,EAAcZ,GAEF,WAAbA,EAAMgB,MACNT,G,CAtIRhB,SAASc,iBAAiB,oBAAoB,WAC1C,IAAMY,EAAY1B,SAASC,cAAc,gB,SAK1B0B,I,OAAAA,EAAfC,EAAAhC,EAAA,CAAAgC,EAAAC,GAAAC,MAAA,SAAAC,EAAwBC,G,IAGhBC,EACAC,EAeIC,EACKC,E,kEAATA,EAAA,W,IAKSC,GAAS,EAATC,GAAS,EAATC,OAASC,E,IAAd,QAAKC,EAAAC,EAAaR,EAASS,UAASC,OAAAC,cAA/BR,GAAAI,EAAAC,EAASI,QAAAC,MAATV,GAAS,EAAwB,CAAjC,IAAIW,EAAJP,EAAStB,MACVT,QAAQC,IAAIqC,GAEI,IAAZA,EAAM,KACNb,GAAe,IAAsBjB,OAAlB8B,EAAMC,KAAK,OAAO,MACrCvC,QAAQC,IAAIwB,G,WALfG,GAAS,EAATC,EAASW,C,aAATb,GAAS,MAATK,EAASS,QAATT,EAASS,Q,YAATb,E,MAAAC,C,EAUL,OAAOJ,C,EAlCfH,EAAEoB,iBAEEnB,EAAQoB,EAAa3B,IACrBQ,EAAW,IAAIoB,SAAS5B,IAMnB6B,SAAQ,SAACC,EAAGC,GACjB/C,QAAQC,IAAI6C,GACZ9C,QAAQC,IAAI8C,E,IAKF,IAAVxB,IACAzB,IACI2B,EAAe,4BAmBnBC,IACAsB,MAAMC,KAAKC,QAAS,CAChBC,QAASC,QACTC,WAAY,OACZC,KAAM7B,K,4CA1CK8B,MAAAC,KAAAC,U,CAiDvB,SAASd,EAAa3B,GAClB,IAAIO,EAAQ,EACRmC,EAAUpE,SAASG,iBAAiB,SACvCO,QAAQC,IAAIyD,GAGb,IAAK,IAAIC,EAAQ,EAAGA,EAAQD,EAAQE,OAAQD,IAAS,CACjD,IAAME,EAAQH,EAAQC,GACtBG,EAAgBD,GAEZA,EAAM3D,UAAU6D,SAAS,UACrBC,EAAUH,KACVI,EAAaJ,GACbtC,KAGI,KAAhBsC,EAAMpD,QACTwD,EAAaJ,GACbtC,I,CAIG,OAAOA,C,CAGX,SAAS0C,EAAaJ,GAClBA,EAAM3D,UAAUgE,IAAI,UACpBL,EAAM3D,UAAUgE,IAAI,S,CAExB,SAASJ,EAAgBD,GACrBA,EAAM3D,UAAUiE,OAAO,UACvBN,EAAM3D,UAAUiE,OAAO,S,CAI3B,SAASH,EAAUH,GACf,OAAQ,gDAAgDO,KAAKP,EAAMpD,M,CAvFvEO,EAAUZ,iBAAiB,U,SAEHkB,G,OAATL,EAAQsC,MAAAC,KAAAC,U","sources":["src/small-form.js"],"sourcesContent":["const refs = {\n    backdrop: document.querySelector('.steps__form-backdrop'),\n    \n    modalInput: document.querySelectorAll('.steps__input'),\n    modalFormBtn: document.querySelector('.steps__btn'),\n    modalCloseBtn: document.querySelector('.steps__form-close-btn'),\n    body: document.querySelector('body'),\n    clientName: document.querySelector('.modal__thanks-name'),\n    \n}\n \n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const modalForm = document.querySelector('.steps__form');\n\n\n    modalForm.addEventListener('submit', formSend);\n\n    async function formSend(e) {\n        e.preventDefault();\n\n        let error = formValidate(modalForm);\n        let formData = new FormData(modalForm);\n\n        if (formData) {\n        }\n\n\n        formData.forEach((x, y) => {\n            console.log(x);\n            console.log(y);\n        \n        });\n\n\n        if (error === 0) {\n            onModalFormBtnClick();\n            let messageToTg = `<b>New small action</b>\\n`;\n            function sendMessage() {\n       \n            \n            \n        \n                for (let entry of formData.entries()) {\n                    console.log(entry);\n\n                    if (entry[1] != '') {\n                        messageToTg += ` ${entry.join(\" : \")}\\n`;\n                        console.log(messageToTg);\n                    }\n\n            \n                }\n                return messageToTg;\n            };\n\n            sendMessage();\n            axios.post(URI_API, {\n                chat_id: CHAT_ID,\n                parse_mode: 'html',\n                text: messageToTg,\n            });\n        }\n\n    };\n\n\n    function formValidate(modalForm) {\n        let error = 0;\n        let formReq = document.querySelectorAll('._req');\n         console.log(formReq);\n        \n\n        for (let index = 0; index < formReq.length; index++) {\n            const input = formReq[index];\n            formRemoveError(input);\n\n            if (input.classList.contains('_email')) {\n                if (emailTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            } else {\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tformAddError(input);\n\t\t\t\t\terror++;\n\t\t\t\t}\n\t\t\t}\n        }\n        return error;\n    }\n\n    function formAddError(input) {\n        input.classList.add('_error');\n        input.classList.add('_error');\n    }\n    function formRemoveError(input) {\n        input.classList.remove('_error');\n        input.classList.remove('_error');\n    }\n\n\n    function emailTest(input) {\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n});\n \n\n\n\n\n\n\n\nfunction onModalFormBtnClick(event) {\n    console.log('qqqq');\n    refs.backdrop.classList.toggle('is-hiden');\n\n    refs.backdrop.addEventListener('click', onBackdropClick);\n    refs.modalCloseBtn.addEventListener('click', (onModalCloseBtnClick));\n\n    refs.clientName.textContent = `Dear ${refs.modalInput[0].value},`;\n    window.addEventListener('keydown', onEscKeyPress);\n    // refs.modalFormBtn.removeEventListener('click', (onModalFormBtnClick));\n}\n\nfunction onModalCloseBtnClick(event) {\n    window.removeEventListener('keydown', onEscKeyPress);\n    refs.backdrop.removeEventListener('click', onBackdropClick);\n\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.backdrop.classList.toggle('is-hiden');\n\n}\nfunction onBackdropClick(event) {\n\n    if (event.target === event.currentTarget) {\n\n        onModalCloseBtnClick();\n    }\n};\n\nfunction onEscKeyPress(event) {   \n    \n    if (event.code===\"Escape\") {\n        onModalCloseBtnClick();\n    }\n    \n}\n\n\n\n\n\n\n\n"],"names":["$bpxeT","parcelRequire","$be6db74326a0a31e$var$refs","backdrop","document","querySelector","modalInput","querySelectorAll","modalFormBtn","modalCloseBtn","body","clientName","$be6db74326a0a31e$var$onModalFormBtnClick","event","console","log","classList","toggle","addEventListener","$be6db74326a0a31e$var$onBackdropClick","$be6db74326a0a31e$var$onModalCloseBtnClick","textContent","concat","value","window","$be6db74326a0a31e$var$onEscKeyPress","removeEventListener","target","currentTarget","code","modalForm","_formSend","$parcel$interopDefault","$2TvXO","mark","_callee","e","error","formData","messageToTg","sendMessage","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","entry","join","err","return","preventDefault","formValidate","FormData","forEach","x","y","axios","post","URI_API","chat_id","CHAT_ID","parse_mode","text","apply","this","arguments","formReq","index","length","input","formRemoveError","contains","emailTest","formAddError","add","remove","test"],"version":3,"file":"index.660df528.js.map"}