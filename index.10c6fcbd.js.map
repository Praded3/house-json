{"mappings":"AAAA,MAAMA,EAAO,CACTC,SAAUC,SAASC,cAAc,yBAEjCC,WAAYF,SAASG,iBAAiB,iBACtCC,aAAcJ,SAASC,cAAc,eACrCI,cAAeL,SAASC,cAAc,0BACtCK,KAAMN,SAASC,cAAc,QAC7BM,WAAYP,SAASC,cAAc,wBAuHvC,SAASO,EAAqBC,GAC1BC,OAAOC,oBAAoB,UAAWC,GACtCd,EAAKC,SAASY,oBAAoB,QAASE,GAE3Cf,EAAKO,cAAcM,oBAAoB,QAAUH,GACjDV,EAAKO,cAAcM,oBAAoB,QAAUH,GACjDV,EAAKC,SAASe,UAAUC,OAAO,W,CAGnC,SAASF,EAAgBJ,GAEjBA,EAAMO,SAAWP,EAAMQ,eAEvBT,G,CAIR,SAASI,EAAcH,GAEF,WAAbA,EAAMS,MACNV,G,CAtIRR,SAASmB,iBAAiB,oBAAoB,WAC1C,MAAMC,EAAYpB,SAASC,cAAc,gBA+EzC,SAASoB,EAAaC,GAClBA,EAAMR,UAAUS,IAAI,UACpBD,EAAMR,UAAUS,IAAI,S,CAExB,SAASC,EAAgBF,GACrBA,EAAMR,UAAUW,OAAO,UACvBH,EAAMR,UAAUW,OAAO,S,CAI3B,SAASC,EAAUJ,GACf,OAAQ,gDAAgDK,KAAKL,EAAMM,M,CAvFvER,EAAUD,iBAAiB,UAE3BU,eAAwBC,GACpBA,EAAEC,iBAEF,IAAIC,EA8CR,SAAsBZ,GAClB,IAAIY,EAAQ,EACRC,EAAUjC,SAASG,iBAAiB,SACvC+B,QAAQC,IAAIF,GAGb,IAAK,IAAIG,EAAQ,EAAGA,EAAQH,EAAQI,OAAQD,IAAS,CACjD,MAAMd,EAAQW,EAAQG,GACtBZ,EAAgBF,GAEZA,EAAMR,UAAUwB,SAAS,UACrBZ,EAAUJ,KACVD,EAAaC,GACbU,KAGI,KAAhBV,EAAMM,QACTP,EAAaC,GACbU,I,CAIG,OAAOA,C,CApEKO,GACRC,EAAW,IAAIC,SAASrB,GAa5B,GAPAoB,EAASE,SAAQ,CAACC,EAAGC,KACjBV,QAAQC,IAAIQ,GACZT,QAAQC,IAAIS,EAAE,IAKJ,IAAVZ,EAAa,CAgFrBE,QAAQC,IAAI,QACZrC,EAAKC,SAASe,UAAUC,OAAO,YAE/BjB,EAAKC,SAASoB,iBAAiB,QAASN,GACxCf,EAAKO,cAAcc,iBAAiB,QAAUX,GAE9CV,EAAKS,WAAWsC,YAAc,QAAQ/C,EAAKI,WAAW,GAAG0B,SACzDlB,OAAOS,iBAAiB,UAAWP,GArF3B,IAAIkC,EAAc,6BAClB,WAKI,IAAK,IAAIC,KAASP,EAASQ,UACvBd,QAAQC,IAAIY,GAEI,IAAZA,EAAM,KACND,GAAe,IAAIC,EAAME,KAAK,WAC9Bf,QAAQC,IAAIW,G,CAQxBI,GACAC,MAAMC,KAAKC,QAAS,CAChBC,QAASC,QACTC,WAAY,OACZC,KAAMX,G","sources":["src/small-form.js"],"sourcesContent":["const refs = {\n    backdrop: document.querySelector('.steps__form-backdrop'),\n    \n    modalInput: document.querySelectorAll('.steps__input'),\n    modalFormBtn: document.querySelector('.steps__btn'),\n    modalCloseBtn: document.querySelector('.steps__form-close-btn'),\n    body: document.querySelector('body'),\n    clientName: document.querySelector('.modal__thanks-name'),\n    \n}\n \n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const modalForm = document.querySelector('.steps__form');\n\n\n    modalForm.addEventListener('submit', formSend);\n\n    async function formSend(e) {\n        e.preventDefault();\n\n        let error = formValidate(modalForm);\n        let formData = new FormData(modalForm);\n\n        if (formData) {\n        }\n\n\n        formData.forEach((x, y) => {\n            console.log(x);\n            console.log(y);\n        \n        });\n\n\n        if (error === 0) {\n            onModalFormBtnClick();\n            let messageToTg = `<b>New small action</b>\\n`;\n            function sendMessage() {\n       \n            \n            \n        \n                for (let entry of formData.entries()) {\n                    console.log(entry);\n\n                    if (entry[1] != '') {\n                        messageToTg += ` ${entry.join(\" : \")}\\n`;\n                        console.log(messageToTg);\n                    }\n\n            \n                }\n                return messageToTg;\n            };\n\n            sendMessage();\n            axios.post(URI_API, {\n                chat_id: CHAT_ID,\n                parse_mode: 'html',\n                text: messageToTg,\n            });\n        }\n\n    };\n\n\n    function formValidate(modalForm) {\n        let error = 0;\n        let formReq = document.querySelectorAll('._req');\n         console.log(formReq);\n        \n\n        for (let index = 0; index < formReq.length; index++) {\n            const input = formReq[index];\n            formRemoveError(input);\n\n            if (input.classList.contains('_email')) {\n                if (emailTest(input)) {\n                    formAddError(input);\n                    error++;\n                }\n            } else {\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tformAddError(input);\n\t\t\t\t\terror++;\n\t\t\t\t}\n\t\t\t}\n        }\n        return error;\n    }\n\n    function formAddError(input) {\n        input.classList.add('_error');\n        input.classList.add('_error');\n    }\n    function formRemoveError(input) {\n        input.classList.remove('_error');\n        input.classList.remove('_error');\n    }\n\n\n    function emailTest(input) {\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n});\n \n\n\n\n\n\n\n\nfunction onModalFormBtnClick(event) {\n    console.log('qqqq');\n    refs.backdrop.classList.toggle('is-hiden');\n\n    refs.backdrop.addEventListener('click', onBackdropClick);\n    refs.modalCloseBtn.addEventListener('click', (onModalCloseBtnClick));\n\n    refs.clientName.textContent = `Dear ${refs.modalInput[0].value},`;\n    window.addEventListener('keydown', onEscKeyPress);\n    // refs.modalFormBtn.removeEventListener('click', (onModalFormBtnClick));\n}\n\nfunction onModalCloseBtnClick(event) {\n    window.removeEventListener('keydown', onEscKeyPress);\n    refs.backdrop.removeEventListener('click', onBackdropClick);\n\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.backdrop.classList.toggle('is-hiden');\n\n}\nfunction onBackdropClick(event) {\n\n    if (event.target === event.currentTarget) {\n\n        onModalCloseBtnClick();\n    }\n};\n\nfunction onEscKeyPress(event) {   \n    \n    if (event.code===\"Escape\") {\n        onModalCloseBtnClick();\n    }\n    \n}\n\n\n\n\n\n\n\n"],"names":["$1978b71b3d83f41c$var$refs","backdrop","document","querySelector","modalInput","querySelectorAll","modalFormBtn","modalCloseBtn","body","clientName","$1978b71b3d83f41c$var$onModalCloseBtnClick","event","window","removeEventListener","$1978b71b3d83f41c$var$onEscKeyPress","$1978b71b3d83f41c$var$onBackdropClick","classList","toggle","target","currentTarget","code","addEventListener","modalForm","formAddError","input","add","formRemoveError","remove","emailTest","test","value","async","e","preventDefault","error","formReq","console","log","index","length","contains","formValidate","formData","FormData","forEach","x","y","textContent","messageToTg","entry","entries","join","sendMessage","axios","post","URI_API","chat_id","CHAT_ID","parse_mode","text"],"version":3,"file":"index.10c6fcbd.js.map"}