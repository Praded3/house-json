{"mappings":"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","sources":["src/small-form.js"],"sourcesContent":["const refs = {\n    backdrop: document.querySelector('.steps__form-backdrop'),\n    \n    modalInput: document.querySelectorAll('.steps__input'),\n    modalFormBtn: document.querySelector('.steps__btn'),\n    modalCloseBtn: document.querySelector('.steps__form-close-btn'),\n    body: document.querySelector('body'),\n    clientName: document.querySelector('.modal__thanks-name'),\n    \n}\n  const TOKEN = '6279094717:AAEINNI-WB8PTYW-nQglKgNdX6lALH6T6A0';\n        const CHAT_ID = '-1001887598395';\n        const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    const modalFormS = document.querySelector('.steps__form');\n\n\n    modalFormS.addEventListener('submit', formSend);\n\n    async function formSend(e) {\n        e.preventDefault();\n\n        let error = formValidate(modalFormS);\n        let formData = new FormData(modalFormS);\n\n        if (formData) {\n        }\n\n\n        formData.forEach((x, y) => {\n            console.log(x);\n            console.log(y);\n        \n        });\n\n\n        if (error === 0) {\n            onModalFormBtnClick();\n            let messageToTg = `<b>New small action</b>\\n`;\n            function sendMessage() {\n       \n            \n            \n        \n                for (let entry of formData.entries()) {\n                    console.log(entry);\n\n                    if (entry[1] != '') {\n                        messageToTg += ` ${entry.join(\" : \")}\\n`;\n                        console.log(messageToTg);\n                    }\n\n            \n                }\n                return messageToTg;\n            };\n\n            sendMessage();\n            axios.post(URI_API, {\n                chat_id: CHAT_ID,\n                parse_mode: 'html',\n                text: messageToTg,\n            });\n        }\n\n    };\n\n\n    function formValidate(modalFormS) {\n         const mistake = {\n    tel: document.querySelector('.small-mistake-tel-message'),\n    mail: document.querySelector('.small-mistake-mail-message'),\n    name: document.querySelector('.small-mistake-name-message'),\n    address: document.querySelector('.small-mistake-address-message'),\n    }\n\n        let error = 0;\n        let formReq = document.querySelectorAll('._req');\n         console.log(formReq);\n        \n\n        for (let index = 0; index < formReq.length; index++) {\n            const input = formReq[index];\n            formRemoveError(input);\n             if (input.classList.contains('_req-name')) {\n                if (nameTest(input)) {\n                    formAddError(input);\n                    error++;\n                    mistake.name.classList.add('_mistake');\n                    \n                } else  {\n                    mistake.name.classList.remove('_mistake');\n                }\n            } \n             if (input.classList.contains('_req-tel')) {\n                if (telTest(input)) {\n                    formAddError(input);\n                    error++;\n                    mistake.tel.classList.add('_mistake');\n                    \n                } else  {\n                    mistake.tel.classList.remove('_mistake');\n                }\n            }\n            if (input.classList.contains('_req-email')) {\n                if (emailTest(input)) {\n                    formAddError(input);\n                    error++;\n                    mistake.mail.classList.add('_mistake');\n                } else  {\n                    mistake.mail.classList.remove('_mistake');\n                }\n            }\n            else {\n\t\t\t\tif (input.value === '') {\n\t\t\t\t\tformAddError(input);\n                    error++;\n                    mistake.address.classList.add('_mistake');\n                }\n                 else  {\n                    mistake.address.classList.remove('_mistake');\n                }\n\t\t\t}\n            \n            //  if (input.classList.contains('_req-address')) {\n            //     if (addressTest(input)) {\n            //         formAddError(input);\n            //         error++;\n            //         mistake.address.classList.add('_mistake');\n                    \n            //     } else  {\n            //         mistake.address.classList.remove('_mistake');\n            //     }\n            // } \n        }\n        return error;\n    }\n\n    function formAddError(input) {\n        input.classList.add('_error');\n        input.classList.add('_error');\n       \n    }\n    function formRemoveError(input) {\n        input.classList.remove('_error');\n        input.classList.remove('_error');\n        // mistake.tel.classList.remove('mistake');\n    }\n    function nameTest(input) {\n        return !/^([A-zа-яё-]+[\\s]{0,1}[A-zа-яё-]+)$/.test(input.value);\n    }\n\n    function emailTest(input) {\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\n    }\n    function telTest(input) {\n        return !/^(\\s*)?(\\+)?([- _():=+]?\\d[- _():=+]?){10,14}(\\s*)?$/.test(input.value);\n    }\n\n    // function addressTest(input) {\n    //     return !/^^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/.test(input.value);\n    // }\n\n\n\n}\n\n  \n);\n\n\n\n\n\n\n\nfunction onModalFormBtnClick(event) {\n    console.log('qqqq');\n    refs.backdrop.classList.toggle('is-hiden');\n\n    refs.backdrop.addEventListener('click', onBackdropClick);\n    refs.modalCloseBtn.addEventListener('click', (onModalCloseBtnClick));\n\n    refs.clientName.textContent = `Dear ${refs.modalInput[0].value},`;\n    window.addEventListener('keydown', onEscKeyPress);\n    // refs.modalFormBtn.removeEventListener('click', (onModalFormBtnClick));\n}\n\nfunction onModalCloseBtnClick(event) {\n    window.removeEventListener('keydown', onEscKeyPress);\n    refs.backdrop.removeEventListener('click', onBackdropClick);\n\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.modalCloseBtn.removeEventListener('click', (onModalCloseBtnClick));\n    refs.backdrop.classList.toggle('is-hiden');\n\n}\nfunction onBackdropClick(event) {\n\n    if (event.target === event.currentTarget) {\n\n        onModalCloseBtnClick();\n    }\n};\n\nfunction onEscKeyPress(event) {   \n    \n    if (event.code===\"Escape\") {\n        onModalCloseBtnClick();\n    }\n    \n}"],"names":["$1978b71b3d83f41c$var$refs","backdrop","document","querySelector","modalInput","querySelectorAll","modalFormBtn","modalCloseBtn","body","clientName","$1978b71b3d83f41c$var$onModalCloseBtnClick","event","window","removeEventListener","$1978b71b3d83f41c$var$onEscKeyPress","$1978b71b3d83f41c$var$onBackdropClick","classList","toggle","target","currentTarget","code","addEventListener","modalFormS","formAddError","input","add","formRemoveError","remove","nameTest","test","value","emailTest","telTest","async","e","preventDefault","error","mistake","tel","mail","name","address","formReq","console","log","index","length","contains","formValidate","formData","FormData","forEach","x","y","textContent","messageToTg","entry","entries","join","sendMessage","axios","post","chat_id","parse_mode","text"],"version":3,"file":"index.5429ae80.js.map"}